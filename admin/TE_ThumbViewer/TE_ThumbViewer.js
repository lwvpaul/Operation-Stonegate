YAHOO.namespace('ThumbViewer.panel');YAHOO.ThumbViewer.panel.panels={};function ScaleThumbnail(id,t,u,w,h){try{var $E=YAHOO.util.Event,$D=YAHOO.util.Dom,evt=$E.getEvent(),p=20,s=30,tv=YAHOO.ThumbViewer.panel.panels;if(!tv.panel){tv.panel=new YAHOO.widget.Panel(id,{width:(w+p),height:(h+p+26),visible:false,draggable:false,close:false,constraintoviewport:false,effect:{effect:eval(YAHOO.widget.ContainerEffect.FADE),duration:0.2}});tv.panel.setHeader(t);tv.panel.setBody("<div style='postition:relative;text-align:center; padding:10px'><div class='panel-arrow-left'></div><img src='"+u+"' width='"+w+"' height='"+h+"'></div>");tv.panel.render(document.body);tv.target=$E.getTarget(evt);vpW=$D.getViewportWidth();vpH=$D.getViewportHeight();r=$D.getRegion(tv.target);a=$D.getElementsByClassName('panel-arrow-left','DIV',tv.panel.body)[0];if((vpW-r['right'])>(r['left'])){x=r['right']+s;}else{x=r['left']-(w+p+s);$D.replaceClass(a,'panel-arrow-left','panel-arrow-right');}xyM=$E.getXY(evt);y=(xyM[1]-(26+p)>0)?(xyM[1]-(26+p)):xyM[1];tv.panel.cfg.setProperty("x",x);tv.panel.cfg.setProperty("y",y);tv.panel.show();setTimeout(function(){$E.addListener(document,'mousemove',closePreviewImage);},300);}}catch(e){}}function closePreviewImage(evt){var $E=YAHOO.util.Event,$D=YAHOO.util.Dom,mX,mY,r,tv=YAHOO.ThumbViewer.panel.panels;try{r=$D.getRegion(tv.target);mX=$E.getPageX(evt);mY=$E.getPageY(evt);if((mX<r['left'])||(mX>r['right'])||(mY<r['top'])||(mY>r['bottom'])){tv.panel.destroy();YAHOO.ThumbViewer.panel.panels={};$E.removeListener(document,'mousemove',closePreviewImage);}}catch(e){}}